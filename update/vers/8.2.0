#!/bin/sh

case "$HOSTTYPE" in
sun4)
	# Obsolete files, probably dating from the 7.6 and 7.7 releases
	echo "/etc/athena/sethnm"		>> "$DEADFILES"
	echo "/etc/athena/timed"		>> "$DEADFILES"
	echo "/etc/athena/timedc"		>> "$DEADFILES"
	echo "/etc/athena/verify"		>> "$DEADFILES"
	echo "/etc/gateways"			>> "$DEADFILES"
	echo "/etc/inet/cron"			>> "$DEADFILES"
	echo "/etc/inet/su"			>> "$DEADFILES"
	echo "/etc/mailaliases"			>> "$DEADFILES"
	echo "/etc/makespools"			>> "$DEADFILES"
	echo "/etc/netid"			>> "$DEADFILES"
	echo "/etc/rfs"				>> "$DEADFILES"
	echo "/etc/rmount"			>> "$DEADFILES"
	echo "/etc/rmountall"			>> "$DEADFILES"
	echo "/etc/rumountall"			>> "$DEADFILES"
	echo "/etc/ups_data"			>> "$DEADFILES"
	echo "/usr/bin/X"			>> "$DEADFILES"
	echo "/usr/bin/X11"			>> "$DEADFILES"
	echo "/usr/bin/adv"			>> "$DEADFILES"
	echo "/usr/bin/align_equals"		>> "$DEADFILES"
	echo "/usr/bin/capitalize"		>> "$DEADFILES"
	echo "/usr/bin/dname"			>> "$DEADFILES"
	echo "/usr/bin/dsconfig"		>> "$DEADFILES"
	echo "/usr/bin/fumount"			>> "$DEADFILES"
	echo "/usr/bin/ideal"			>> "$DEADFILES"
	echo "/usr/bin/idload"			>> "$DEADFILES"
	echo "/usr/bin/input_from_defaults"	>> "$DEADFILES"
	echo "/usr/bin/insert_brackets"		>> "$DEADFILES"
	echo "/usr/bin/lnsxts"			>> "$DEADFILES"
	echo "/usr/bin/lnttys"			>> "$DEADFILES"
	echo "/usr/bin/lnxts"			>> "$DEADFILES"
	echo "/usr/bin/nsquery"			>> "$DEADFILES"
	echo "/usr/bin/pic"			>> "$DEADFILES"
	echo "/usr/bin/remove_brackets"		>> "$DEADFILES"
	echo "/usr/bin/rfadmin"			>> "$DEADFILES"
	echo "/usr/bin/rfpasswd"		>> "$DEADFILES"
	echo "/usr/bin/rfstart"			>> "$DEADFILES"
	echo "/usr/bin/rfstop"			>> "$DEADFILES"
	echo "/usr/bin/rmntstat"		>> "$DEADFILES"
	echo "/usr/bin/shift_lines"		>> "$DEADFILES"
	echo "/usr/bin/sunview1"		>> "$DEADFILES"
	echo "/usr/bin/sv_xv_sel_svc"		>> "$DEADFILES"
	echo "/usr/bin/unadv"			>> "$DEADFILES"
	echo "/usr/lib/.text_extras_menu"	>> "$DEADFILES"
	echo "/usr/lib/.textswrc"		>> "$DEADFILES"
	echo "/usr/lib/X"			>> "$DEADFILES"
	echo "/usr/lib/defaults"		>> "$DEADFILES"
	echo "/usr/lib/fonts"			>> "$DEADFILES"
	echo "/usr/lib/fs/lofs/umount"		>> "$DEADFILES"
	echo "/usr/lib/ideal"			>> "$DEADFILES"
	echo "/usr/lib/libadmagt.a"		>> "$DEADFILES"
	echo "/usr/lib/libadmapm.a"		>> "$DEADFILES"
	echo "/usr/lib/libadmcom.a"		>> "$DEADFILES"
	echo "/usr/lib/libadmsec.a"		>> "$DEADFILES"
	echo "/usr/lib/libdl_stubs.a"		>> "$DEADFILES"
	echo "/usr/lib/libform.a"		>> "$DEADFILES"
	echo "/usr/lib/libkstat.a"		>> "$DEADFILES"
	echo "/usr/lib/libmenu.a"		>> "$DEADFILES"
	echo "/usr/lib/libns.a"			>> "$DEADFILES"
	echo "/usr/lib/libnswcompat.a"		>> "$DEADFILES"
	echo "/usr/lib/libnswdns.a"		>> "$DEADFILES"
	echo "/usr/lib/libnswfiles.a"		>> "$DEADFILES"
	echo "/usr/lib/libnswnis.a"		>> "$DEADFILES"
	echo "/usr/lib/libnswnisplus.a"		>> "$DEADFILES"
	echo "/usr/lib/libpanel.a"		>> "$DEADFILES"
	echo "/usr/lib/libresolv.a"		>> "$DEADFILES"
	echo "/usr/lib/libstraddr.a"		>> "$DEADFILES"
	echo "/usr/lib/libswitch.a"		>> "$DEADFILES"
	echo "/usr/lib/libtcpip.a"		>> "$DEADFILES"
	echo "/usr/lib/llib-lform"		>> "$DEADFILES"
	echo "/usr/lib/llib-lform.ln"		>> "$DEADFILES"
	echo "/usr/lib/llib-lmenu"		>> "$DEADFILES"
	echo "/usr/lib/llib-lmenu.ln"		>> "$DEADFILES"
	echo "/usr/lib/llib-lpanel"		>> "$DEADFILES"
	echo "/usr/lib/llib-lpanel.ln"		>> "$DEADFILES"
	echo "/usr/lib/lpd"			>> "$DEADFILES"
	echo "/usr/lib/lpdfilters"		>> "$DEADFILES"
	echo "/usr/lib/makedev"			>> "$DEADFILES"
	echo "/usr/lib/nswdns.so"		>> "$DEADFILES"
	echo "/usr/lib/nswdns.so.1"		>> "$DEADFILES"
	echo "/usr/lib/nswfiles.so"		>> "$DEADFILES"
	echo "/usr/lib/nswfiles.so.1"		>> "$DEADFILES"
	echo "/usr/lib/straddr.so.1"		>> "$DEADFILES"
	echo "/usr/lib/switch.so.1"		>> "$DEADFILES"
	echo "/usr/lib/tcpip.so.1"		>> "$DEADFILES"
	echo "/usr/lib/text_extras_menu"	>> "$DEADFILES"
	echo "/usr/lib/textswrc"		>> "$DEADFILES"
	echo "/usr/nserve"			>> "$DEADFILES"
	echo "/usr/sbin/adv"			>> "$DEADFILES"
	echo "/usr/sbin/cdm"			>> "$DEADFILES"
	echo "/usr/sbin/cdmanager"		>> "$DEADFILES"
	echo "/usr/sbin/cdruninstall"		>> "$DEADFILES"
	echo "/usr/sbin/dname"			>> "$DEADFILES"
	echo "/usr/sbin/fumount"		>> "$DEADFILES"
	echo "/usr/sbin/hostrfs"		>> "$DEADFILES"
	echo "/usr/sbin/idload"			>> "$DEADFILES"
	echo "/usr/sbin/nsquery"		>> "$DEADFILES"
	echo "/usr/sbin/rfadmin"		>> "$DEADFILES"
	echo "/usr/sbin/rfpasswd"		>> "$DEADFILES"
	echo "/usr/sbin/rfstart"		>> "$DEADFILES"
	echo "/usr/sbin/rfstop"			>> "$DEADFILES"
	echo "/usr/sbin/rmntstat"		>> "$DEADFILES"
	echo "/usr/sbin/rmount"			>> "$DEADFILES"
	echo "/usr/sbin/rmountall"		>> "$DEADFILES"
	echo "/usr/sbin/rumountall"		>> "$DEADFILES"
	echo "/usr/sbin/udpublickey"		>> "$DEADFILES"
	echo "/usr/sbin/unadv"			>> "$DEADFILES"
	echo "/usr/share/lib/keytables/layout_20njle" >> "$DEADFILES"
	echo "/usr/share/lib/zoneinfo/US/East-In" >> "$DEADFILES"
	echo "/usr/share/lib/zoneinfo/US/Hawaii=" >> "$DEADFILES"
	echo "/usr/share/lib/zoneinfo/US/Mountai" >> "$DEADFILES"
	# DEADFILES doesn't handle directories.
	rm -rf /usr/lib/fs/rfs /usr/lib/rfs /etc/fs/rfs

	# Dead files missed in the 8.1 release.
	echo "/usr/lib/libX.so"			>> "$DEADFILES"
	echo "/usr/lib/libX11.so"		>> "$DEADFILES"
	echo "/usr/lib/libXaw.so"		>> "$DEADFILES"
	echo "/usr/lib/libXext.so"		>> "$DEADFILES"
	echo "/usr/lib/libXi.so"		>> "$DEADFILES"
	echo "/usr/lib/libXinput.so"		>> "$DEADFILES"
	echo "/usr/lib/libXmu.so"		>> "$DEADFILES"
	echo "/usr/lib/libXol.so"		>> "$DEADFILES"
	echo "/usr/lib/libXt.so"		>> "$DEADFILES"
	echo "/usr/lib/libXtst.so"		>> "$DEADFILES"
	echo "/usr/lib/libucb.so"		>> "$DEADFILES"
	echo "/usr/openwin/lib/X11/system.mwmrc" >> "$DEADFILES"
	echo "/etc/athena/krb.conf.v5"		>> "$DEADFILES"
	echo "/etc/athena/console-ttymon"	>> "$DEADFILES"
	echo "/kernel/strmod/arp"		>> "$DEADFILES"
	cat "$LIBDIR/solaris251-26"		>> "$DEADFILES"

	# Solaris 2.6 binaries reference a symbol "textdomain" not
	# present in the Solaris 2.5.1 shared libraries.  Copy aside
	# binaries used after the OS is tracked.
	echo "/usr/bin/cp"			>> "$OLDBINS"
	echo "/usr/bin/rm"			>> "$OLDBINS"
	echo "/usr/bin/sh"			>> "$OLDBINS"
	echo "/usr/bin/tar"			>> "$OLDBINS"
	echo "/usr/bin/dd"			>> "$OLDBINS"
	echo "/usr/bin/sleep"			>> "$OLDBINS"
	echo "/usr/bin/date"			>> "$OLDBINS"
	echo "/usr/sbin/reboot"			>> "$OLDBINS"
	echo "/usr/sbin/sync"			>> "$OLDBINS"

	# The Solaris 2.6 upgrade is pretty traumatic as far as old
	# binaries running with new shared libraries on an old kernel.
	# Copy aside libraries required by commands which run after
	# the os volume is tracked.
	echo "/usr/lib/libadm.so.1"		>> "$OLDLIBS"
	echo "/usr/lib/libsocket.so.1"		>> "$OLDLIBS"
	echo "/usr/lib/libnsl.so.1"		>> "$OLDLIBS"
	echo "/usr/lib/libelf.so.1"		>> "$OLDLIBS"
	echo "/usr/lib/libdl.so.1"		>> "$OLDLIBS"
	echo "/usr/lib/libc.so.1"		>> "$OLDLIBS"
	echo "/usr/lib/libintl.so.1"		>> "$OLDLIBS"
	echo "/usr/lib/libmp.so.1"		>> "$OLDLIBS"
	echo "/usr/lib/libw.so.1"		>> "$OLDLIBS"
	echo "/usr/lib/libsec.so.1"		>> "$OLDLIBS"
	echo "/usr/lib/libbsm.so.1"		>> "$OLDLIBS"

	echo "/etc/athena/newsyslog.conf"	>> "$CONFCHG"
	echo "/etc/default/sulogin"		>> "$CONFCHG"
	echo "/etc/inet/services"		>> "$CONFCHG"
	echo "/etc/minor_perm"			>> "$CONFCHG"
	echo "/etc/mail/aliases"		>> "$CONFCHG"
	echo "/etc/mail/sendmail.cf"		>> "$CONFCHG"

	# Set variables for an OS update.
	echo "TRACKOS=true"			>> "$CONFVARS"
	echo "NEWOS=true"			>> "$CONFVARS"
	echo "NEWUNIX=true"			>> "$CONFVARS"
	echo "NEWBOOT=true"			>> "$CONFVARS"
	echo "NEWDEVS=true"			>> "$CONFVARS"

	# DEADFILES doesn't handle directories; just nuke this by
	# hand.
	rm -rf /etc/athena/login/fonts

	MACHINE=sun4
	SYSTEM=Solaris
	;;

sgi)
	echo "/etc/aliases"			>> "$CONFCHG"
	echo "/etc/sendmail.cf"			>> "$CONFCHG"

	case `uname -r` in
	5.3)
		# Boot up 6.2 miniroot to upgrade the OS.
		echo "NEWOS=true"			>> "$CONFVARS"
		echo "MINIROOT=true"			>> "$CONFVARS"

		# 6.2 requires an up-to-date sash in the volume header.
		echo "NEWBOOT=true"			>> "$CONFVARS"

		# Remove all currently installed packages,
		# and install all desired local packages
		echo "di *"				>> "$LOCALPACKAGES"
		echo "remove I"				>> "$LOCALPACKAGES"
		echo "i c++_eoe.sw.lib"			>> "$LOCALPACKAGES"
		echo "i c_eoe.sw.lib"			>> "$LOCALPACKAGES"
		echo "i compiler_eoe.sw.lboot"		>> "$LOCALPACKAGES"
		echo "i compiler_eoe.sw.lib"		>> "$LOCALPACKAGES"
		echo "i compiler_eoe.sw.unix"		>> "$LOCALPACKAGES"
		echo "i compiler_eoe.sw32.unix"		>> "$LOCALPACKAGES"
		echo "i eoe.sw.efs"			>> "$LOCALPACKAGES"
		echo "i eoe.sw.gfx"			>> "$LOCALPACKAGES"
		echo "i eoe.sw.irix_lib"		>> "$LOCALPACKAGES"
		echo "i eoe.sw.unix"			>> "$LOCALPACKAGES"
		echo "i dmedia_eoe.sw.midi"		>> "$LOCALPACKAGES"
		echo "i isdn_eoe.sw.isdn"		>> "$LOCALPACKAGES"
		echo "i eoe.sw.dlpi"			>> "$LOCALPACKAGES"
		echo "i eoe.sw.ppp"			>> "$LOCALPACKAGES"
		echo "i eoe.sw.uucp"			>> "$LOCALPACKAGES"
		echo "i isdnadmin.sw.isdnadmin"		>> "$LOCALPACKAGES"
		echo "i insight_base.sw.eoe"		>> "$LOCALPACKAGES"
		echo "i eoe.sw.xfs"			>> "$LOCALPACKAGES"
		echo "i dmedia_eoe.sw.video"		>> "$LOCALPACKAGES"
		echo "i eoe.sw.gltools"			>> "$LOCALPACKAGES"
		echo "i eoe.sw.named"			>> "$LOCALPACKAGES"
		echo "i nfs.sw.nfs"			>> "$LOCALPACKAGES"
		echo "i eoe.sw.terminfo"		>> "$LOCALPACKAGES"
		echo "i eoe.sw.termbase"		>> "$LOCALPACKAGES"
		echo "i desktop_eoe.sw"			>> "$LOCALPACKAGES"
		echo "i ViewKit_eoe.sw.base"		>> "$LOCALPACKAGES"
		echo "i desktop_base.sw"		>> "$LOCALPACKAGES"
		echo "i motif_eoe.sw.eoe"		>> "$LOCALPACKAGES"
		echo "i 4Dwm.sw"			>> "$LOCALPACKAGES"
		echo "i cadmin.sw"			>> "$LOCALPACKAGES"
		echo "i il_eoe.sw"			>> "$LOCALPACKAGES"
		echo "i ifl_eoe.sw.c++"			>> "$LOCALPACKAGES"
		echo "i x_eoe.sw"			>> "$LOCALPACKAGES"
		echo "i dps_eoe.sw.dpsfonts"		>> "$LOCALPACKAGES"
		echo "i compiler_eoe.sw.cpp"		>> "$LOCALPACKAGES"
		echo "i patchSG0001227.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0001270.compiler_eoe_sw.unix" \
							>> "$LOCALPACKAGES"
		echo "i patchSG0001330.eoe_sw.efs"	>> "$LOCALPACKAGES"
		echo "i patchSG0001397.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0001482.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0001535.eoe_sw.gfx"	>> "$LOCALPACKAGES"
		echo "i patchSG0001537.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0001598.desktop_base_sw.dso" \
							>> "$LOCALPACKAGES"
		echo "i patchSG0001615.nfs_sw.nfs"	>> "$LOCALPACKAGES"
		echo "i patchSG0001639.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0001723.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0001840.motif_eoe_sw.eoe" \
							>> "$LOCALPACKAGES"
		echo "i patchSG0001982.x_eoe_sw.Server"	>> "$LOCALPACKAGES"
		echo "i patchSG0002000.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002009.eoe_sw.gfx"	>> "$LOCALPACKAGES"
		echo "i patchSG0002069.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002070.eoe_sw.named"	>> "$LOCALPACKAGES"
		echo "i patchSG0002070.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002122.eoe_sw.gfx"	>> "$LOCALPACKAGES"
		echo "i patchSG0002143.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002181.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002200.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002239.desktop_eoe_sw.envm" \
							>> "$LOCALPACKAGES"
		echo "i patchSG0002262.eoe_sw.irix_lib"	>> "$LOCALPACKAGES"
		echo "i patchSG0002262.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002278.nfs_sw.nfs"	>> "$LOCALPACKAGES"
		echo "i patchSG0002284.eoe_sw.irix_lib"	>> "$LOCALPACKAGES"
		echo "i patchSG0002284.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002284.eoe_sw.xfs"	>> "$LOCALPACKAGES"
		echo "i patchSG0002330.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002365.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002365.nfs_sw.nfs"	>> "$LOCALPACKAGES"
		echo "i patchSG0002420.eoe_sw.irix_lib"	>> "$LOCALPACKAGES"
		echo "i patchSG0002422.compiler_eoe_sw.lib" \
							>> "$LOCALPACKAGES"
		echo "i patchSG0002423.x_eoe_sw.Server"	>> "$LOCALPACKAGES"
		echo "i patchSG0002423.x_eoe_sw.eoe"	>> "$LOCALPACKAGES"
		echo "i patchSG0002423.x_eoe_sw.pex"	>> "$LOCALPACKAGES"
		echo "i patchSG0002454.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002457.eoe_sw.unix"	>> "$LOCALPACKAGES"
		echo "i patchSG0002458.compiler_eoe_sw.unix" \
							>> "$LOCALPACKAGES"
		echo "i patchSG0002580.x_eoe_sw.Server"	>> "$LOCALPACKAGES"
		echo "i patchSG0002580.x_eoe_sw.eoe"	>> "$LOCALPACKAGES"
		echo "i patchSG0002752.c++_eoe_sw.lib"	>> "$LOCALPACKAGES"
		echo "i patchSG0002752.compiler_eoe_sw.cpp" \
							>> "$LOCALPACKAGES"
		echo "i patchSG0002752.compiler_eoe_sw.lib" \
							>> "$LOCALPACKAGES"
		echo "i patchSG0002752.compiler_eoe_sw.unix" \
							>> "$LOCALPACKAGES"
		echo "i patchSG0002777.eoe_sw.unix"	>> "$LOCALPACKAGES"

		# All other packages are installed in symlink mode
		echo "i A"				>> "$LINKPACKAGES"

		# Keep local packages as they are when installing links
		echo "di c++_eoe.sw.lib"		>> "$LINKPACKAGES"
		echo "di c_eoe.sw.lib"			>> "$LINKPACKAGES"
		echo "di compiler_eoe.sw.lboot"		>> "$LINKPACKAGES"
		echo "di compiler_eoe.sw.lib"		>> "$LINKPACKAGES"
		echo "di compiler_eoe.sw.unix"		>> "$LINKPACKAGES"
		echo "di compiler_eoe.sw32.unix"	>> "$LINKPACKAGES"
		echo "di eoe.sw.efs"			>> "$LINKPACKAGES"
		echo "di eoe.sw.gfx"			>> "$LINKPACKAGES"
		echo "di eoe.sw.irix_lib"		>> "$LINKPACKAGES"
		echo "di eoe.sw.unix"			>> "$LINKPACKAGES"
		echo "di dmedia_eoe.sw.midi"		>> "$LINKPACKAGES"
		echo "di isdn_eoe.sw.isdn"		>> "$LINKPACKAGES"
		echo "di eoe.sw.dlpi"			>> "$LINKPACKAGES"
		echo "di eoe.sw.ppp"			>> "$LINKPACKAGES"
		echo "di eoe.sw.uucp"			>> "$LINKPACKAGES"
		echo "di isdnadmin.sw.isdnadmin"	>> "$LINKPACKAGES"
		echo "di insight_base.sw.eoe"		>> "$LINKPACKAGES"
		echo "di eoe.sw.xfs"			>> "$LINKPACKAGES"
		echo "di dmedia_eoe.sw.video"		>> "$LINKPACKAGES"
		echo "di eoe.sw.gltools"		>> "$LINKPACKAGES"
		echo "di eoe.sw.named"			>> "$LINKPACKAGES"
		echo "di nfs.sw.nfs"			>> "$LINKPACKAGES"
		echo "di eoe.sw.terminfo"		>> "$LINKPACKAGES"
		echo "di eoe.sw.termbase"		>> "$LINKPACKAGES"
		echo "di desktop_eoe.sw"		>> "$LINKPACKAGES"
		echo "di ViewKit_eoe.sw.base"		>> "$LINKPACKAGES"
		echo "di desktop_base.sw"		>> "$LINKPACKAGES"
		echo "di motif_eoe.sw.eoe"		>> "$LINKPACKAGES"
		echo "di 4Dwm.sw"			>> "$LINKPACKAGES"
		echo "di cadmin.sw"			>> "$LINKPACKAGES"
		echo "di il_eoe.sw"			>> "$LINKPACKAGES"
		echo "di ifl_eoe.sw.c++"		>> "$LINKPACKAGES"
		echo "di x_eoe.sw"			>> "$LINKPACKAGES"
		echo "di dps_eoe.sw.dpsfonts"		>> "$LINKPACKAGES"
		echo "di compiler_eoe.sw.cpp"		>> "$LINKPACKAGES"
		echo "di patchSG0001227.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0001270.compiler_eoe_sw.unix" \
							>> "$LINKPACKAGES"
		echo "di patchSG0001330.eoe_sw.efs"	>> "$LINKPACKAGES"
		echo "di patchSG0001397.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0001482.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0001535.eoe_sw.gfx"	>> "$LINKPACKAGES"
		echo "di patchSG0001537.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0001598.desktop_base_sw.dso" \
							>> "$LINKPACKAGES"
		echo "di patchSG0001615.nfs_sw.nfs"	>> "$LINKPACKAGES"
		echo "di patchSG0001639.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0001723.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0001840.motif_eoe_sw.eoe" \
							>> "$LINKPACKAGES"
		echo "di patchSG0001982.x_eoe_sw.Server" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002000.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002009.eoe_sw.gfx"	>> "$LINKPACKAGES"
		echo "di patchSG0002069.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002070.eoe_sw.named"	>> "$LINKPACKAGES"
		echo "di patchSG0002070.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002122.eoe_sw.gfx"	>> "$LINKPACKAGES"
		echo "di patchSG0002143.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002181.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002200.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002239.desktop_eoe_sw.envm" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002262.eoe_sw.irix_lib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002262.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002278.nfs_sw.nfs"	>> "$LINKPACKAGES"
		echo "di patchSG0002284.eoe_sw.irix_lib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002284.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002284.eoe_sw.xfs"	>> "$LINKPACKAGES"
		echo "di patchSG0002330.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002365.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002365.nfs_sw.nfs"	>> "$LINKPACKAGES"
		echo "di patchSG0002420.eoe_sw.irix_lib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002422.compiler_eoe_sw.lib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002423.x_eoe_sw.Server" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002423.x_eoe_sw.eoe"	>> "$LINKPACKAGES"
		echo "di patchSG0002423.x_eoe_sw.pex"	>> "$LINKPACKAGES"
		echo "di patchSG0002454.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002457.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0002458.compiler_eoe_sw.unix" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002580.x_eoe_sw.Server" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002580.x_eoe_sw.eoe"	>> "$LINKPACKAGES"
		echo "di patchSG0002752.c++_eoe_sw.lib"	>> "$LINKPACKAGES"
		echo "di patchSG0002752.compiler_eoe_sw.cpp" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002752.compiler_eoe_sw.lib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002752.compiler_eoe_sw.unix" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002777.eoe_sw.unix"	>> "$LINKPACKAGES"

		# Packages that cause conflicts, or that we just
		# don't want.
		echo "di io4prom"			>> "$LINKPACKAGES"
		echo "di mmail"				>> "$LINKPACKAGES"
		echo "di RapidApp.sw.pre_6_2_only"	>> "$LINKPACKAGES"
		echo "di SoftWindows2"			>> "$LINKPACKAGES"
		echo "di acrobat"			>> "$LINKPACKAGES"
		echo "di xpg4"				>> "$LINKPACKAGES"
		echo "di SpeedShop.sw64"		>> "$LINKPACKAGES"
		echo "di ViewKit_dev.sw64"		>> "$LINKPACKAGES"
		echo "di ViewKit_eoe.sw64"		>> "$LINKPACKAGES"
		echo "di WV_dev.sw64"			>> "$LINKPACKAGES"
		echo "di WV_eoe.sw64"			>> "$LINKPACKAGES"
		echo "di WorkShop.sw64"			>> "$LINKPACKAGES"
		echo "di c++_dev.sw64"			>> "$LINKPACKAGES"
		echo "di c++_eoe.sw64"			>> "$LINKPACKAGES"
		echo "di c_eoe.sw64"			>> "$LINKPACKAGES"
		echo "di cms_eoe.sw64"			>> "$LINKPACKAGES"
		echo "di compiler_dev.sw64"		>> "$LINKPACKAGES"
		echo "di compiler_eoe.sw64"		>> "$LINKPACKAGES"
		echo "di desktop_base.sw64"		>> "$LINKPACKAGES"
		echo "di dev.sw64"			>> "$LINKPACKAGES"
		echo "di dmedia_dev.sw64"		>> "$LINKPACKAGES"
		echo "di eoe.sw64"			>> "$LINKPACKAGES"
		echo "di ftn77_eoe.sw64"		>> "$LINKPACKAGES"
		echo "di ftn90_eoe.sw64"		>> "$LINKPACKAGES"
		echo "di ftn_dev.sw64"			>> "$LINKPACKAGES"
		echo "di ftn_eoe.sw64"			>> "$LINKPACKAGES"
		echo "di gl_dev.sw64"			>> "$LINKPACKAGES"
		echo "di impr_dev.sw64"			>> "$LINKPACKAGES"
		echo "di insight.sw64"			>> "$LINKPACKAGES"
		echo "di inventor_dev.sw64"		>> "$LINKPACKAGES"
		echo "di inventor_eoe.sw64"		>> "$LINKPACKAGES"
		echo "di license_dev.lib64"		>> "$LINKPACKAGES"
		echo "di molinv_dev.sw64"		>> "$LINKPACKAGES"
		echo "di molinv_eoe.sw64"		>> "$LINKPACKAGES"
		echo "di motif_dev.sw64"		>> "$LINKPACKAGES"
		echo "di motif_eoe.sw64"		>> "$LINKPACKAGES"
		echo "di performer_compat.sw64"		>> "$LINKPACKAGES"
		echo "di performer_dev.sw64"		>> "$LINKPACKAGES"
		echo "di performer_eoe.sw64"		>> "$LINKPACKAGES"
		echo "di tooltalk_eoe.sw64"		>> "$LINKPACKAGES"
		echo "di websupport_eoe.sw64"		>> "$LINKPACKAGES"
		echo "di x_dev.sw64"			>> "$LINKPACKAGES"
		echo "di x_eoe.sw64"			>> "$LINKPACKAGES"
		echo "di complib.sw.sgimath_64"		>> "$LINKPACKAGES"
		echo "di patchSG0001295.eoe1_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0001336.compiler_eoe_sw32.unix"	\
							>> "$LINKPACKAGES"
		echo "di patchSG0001472.eoe_sw.gfx"	>> "$LINKPACKAGES"
		echo "di patchSG0001472.eoe_sw.unix"	>> "$LINKPACKAGES"
		echo "di patchSG0001472.eoe_sw32.gfx"	>> "$LINKPACKAGES"
		echo "di patchSG0001678.license_eoe_sw.license_eoe" \
							>> "$LINKPACKAGES"
		echo "di patchSG0001723.nfs_sw.dskless_client" \
							>> "$LINKPACKAGES"
		echo "di patchSG0001961.gfe_sw.eoe"	>> "$LINKPACKAGES"
		echo "di patchSG0002030.impactdm_sw.common" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002030.impactdm_sw32.common" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002030.impactvideo_sw.eoe" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002030.impactvideo_sw32.eoe" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002070.netman_data_man.data" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002278"		>> "$LINKPACKAGES"
		echo "di patchSG0002422.compiler_dev_sw32.lib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002458.compiler_eoe_hdr.lib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002575.compiler_dev_sw.speclib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002575.ftn77_eoe_sw.lib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002575.ftn77_eoe_sw32.lib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002575.ftn_dev_sw.lib"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DFS_sw.server"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DFS_sw.kernel"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DFS_sw.base"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DCE_sw64.lib"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DCE_sw32.lib"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DCE_sw.security" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002678.DCE_sw.lib"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DCE_sw.ilogin"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DCE_sw.idl"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DCE_sw.gda"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DCE_sw.cds"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DCE_sw.base"	>> "$LINKPACKAGES"
		echo "di patchSG0002678.DCE_hdr.lib"	>> "$LINKPACKAGES"
		echo "di patchSG0002752.ftn77_eoe_sw.lib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002777.dev_man.irix_lib" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002777.nfs_sw.dskless_client" \
							>> "$LINKPACKAGES"
		echo "di patchSG0001038.SoftWindows2_sw.eoe" \
							>> "$LINKPACKAGES"
		echo "di patchSG0001239.SoftWindows2_sw.eoe" \
							>> "$LINKPACKAGES"
		echo "di patchSG0001472"		>> "$LINKPACKAGES"
		echo "di patchSG0001413"		>> "$LINKPACKAGES"
		echo "di patchSG0001295"		>> "$LINKPACKAGES"
		echo "di patchSG0001270.compiler_eoe_sw64" \
							>> "$LINKPACKAGES"
		echo "di patchSG0001336.compiler_eoe_sw64" \
							>> "$LINKPACKAGES"
		echo "di patchSG0001447.eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0001472.eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0001535.eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0001840.motif_eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0001932.compiler_eoe_sw64" \
							>> "$LINKPACKAGES"
		echo "di patchSG0001935.eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002016.c++_dev_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002016.c++_eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002016.compiler_dev_sw64" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002016.compiler_eoe_sw64" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002016.ftn_dev_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002016.ftn_eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002262.dev_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002262.eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002360.ftn_dev_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002422.compiler_dev_sw64" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002422.compiler_eoe_sw64" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002423.x_eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002458.compiler_eoe_sw64" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002575.ftn77_eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002575.ftn_dev_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002580.x_dev_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002580.x_eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002752.c++_dev_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002752.c++_eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002752.compiler_dev_sw64" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002752.compiler_eoe_sw64" \
							>> "$LINKPACKAGES"
		echo "di patchSG0002752.ftn77_eoe_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002752.ftn_dev_sw64"	>> "$LINKPACKAGES"
		echo "di patchSG0002752.ftn_eoe_sw64"	>> "$LINKPACKAGES"

		# New or old versions of configuration files left by inst.
		# These get removed on PUBLIC workstations.
		# $CONFCHG files that are similarly versioned are handled
		# separately, in update-os.
		echo "/etc/init.d/network.O"		>> "$CONFIGVERS"
		echo "/usr/include/make/makelib.mk.O"	>> "$CONFIGVERS"
		echo "/usr/include/make/makelint.mk.O"	>> "$CONFIGVERS"
		echo "/usr/include/make/po.mk.O"	>> "$CONFIGVERS"
		echo "/usr/include/make/shx.mk.O"	>> "$CONFIGVERS"
		echo "/usr/include/make/system.mk.O"	>> "$CONFIGVERS"
		echo "/usr/lib/RapidApp/lib/icon.fti.O"	>> "$CONFIGVERS"
		echo "/usr/lib/X11/app-defaults/4DWm.O"	>> "$CONFIGVERS"
		echo "/usr/lib/X11/app-defaults/Mwm.N"	>> "$CONFIGVERS"
		echo "/usr/lib/X11/system.chestrc.O"	>> "$CONFIGVERS"
		echo "/usr/lib/X11/system.mwmrc.N"	>> "$CONFIGVERS"
		echo "/var/X11/xdm/Xsession.dt.O"	>> "$CONFIGVERS"

		# Static route handling has changed, nuke the
		# old-style config files.
		echo "/etc/config/staticroute"		>> "$DEADFILES"
		echo "/etc/config/staticroute.options"	>> "$DEADFILES"
		echo "/etc/config/staticroute.options.saved" \
							>> "$DEADFILES"

		# 5.3 installed these as links to the OS volume,
		# and inst seems to leave them alone if present.
		for i in /etc/config/isdnd /etc/config/isdnd.options ; do
			if [ -l $i ] ; then
				rm -f $i
			fi
		done

		# 5.3 installed these as links to the OS volume,
		# and inst saves them as ".O" files if present
		oldlinks=" \
		    /etc/fddi/smtd.conf \
		    /etc/fddi/smtd.mib \
		    /usr/lib/X11/app-defaults/InPerson \
		    /usr/lib/X11/ja_JP.EUC/app-defaults/InPerson \
		    /usr/local/lib/netscape/mailcap  \
		    /usr/local/lib/netscape/mime.types \
		    /usr/share/data/sounds/soundscheme/schemes/inperson.ss \
		    /var/sysgen/master.d/isdnchan \
		    /var/sysgen/master.d/isdnlib \
		    /var/sysgen/master.d/isdnlib.exports \
		    /var/sysgen/master.d/isdnsme \
		    /var/sysgen/master.d/lapd \
		    /var/sysgen/master.d/q931cc \
		    /var/sysgen/master.d/q931pc"
		for i in $oldlinks ; do
			if [ -l $i ] ; then
				rm -f $i
			fi
		done

		echo "/etc/inetd.conf"		>> "$CONFCHG"
		echo "/etc/services"		>> "$CONFCHG"
		MACHINE=INDY
		SYSTEM=IRIX
		;;
	6.3)
		MACHINE=O2
		SYSTEM=IRIX
		;;
	esac
	;;
esac

# We're going to fully-qualified hostnames.  If $HOST does not contain
# a '.', tack on "mit.edu".
if [ `expr "$HOST" : '\.'` -eq 0 ]; then
	HOST=$HOST.mit.edu
fi

# Do a little rc.conf editing to take care of possible updates to HOST,
# MACHINE, and SYSTEM.  We have to be careful with SYSTEM because it
# isn't already present on the sun4.
ed -s /etc/athena/rc.conf << EOS
/^HOST/s/=[^;]*/=$HOST/
/^MACHINE/s/=[^;]*/=$MACHINE/
w
q
EOS
if [ `grep -c '^SYSTEM' /etc/athena/rc.conf` = 1 ]; then
	ed -s /etc/athena/rc.conf << EOS
/^SYSTEM/s/=[^;]*/=$SYSTEM/
w
q
EOS
else
		cat >> /etc/athena/rc.conf << EOM
SYSTEM=$SYSTEM;		export SYSTEM		#  Type of operating system
EOM
fi

# On Solaris machines with SYNCCONFIG set, update /etc/nodename so we
# don't have to reboot an extra time during this update.
if [ "$HOSTTYPE" = sun4 -a "$SYNCCONFIG" = true ]; then
	rm -f /etc/nodename.new /etc/nodename.saved
	echo "$HOST" > /etc/nodename.new
	ln /etc/nodename /etc/nodename.saved
	mv /etc/nodename.new /etc/nodename
fi

echo "/.cshrc"					>> "$CONFCHG"
echo "/.login"					>> "$CONFCHG"
echo "/.profile"				>> "$CONFCHG"
echo "/.xsession"				>> "$CONFCHG"
echo "/etc/athena/inetd.conf"			>> "$CONFCHG"
echo "/etc/ntp.conf"				>> "$CONFCHG"
echo "/etc/shells"				>> "$CONFCHG"
echo "/etc/sshd_config"				>> "$CONFCHG"
echo "/etc/syslog.conf"				>> "$CONFCHG"
echo "/var/spool/cron/crontabs/root"		>> "$CONFCHG"

echo "/usr/sipb"				>> "$DEADFILES"
# Cleanup after various cracking incidents

# Skull virus of 19971027:
echo "/etc/athena/login/bitmaps/skl"		>> "$DEADFILES"
echo "/etc/athena/login/bitmaps/skleyes0.xbm"	>> "$DEADFILES"
echo "/etc/athena/login/bitmaps/skleyes1.xbm"	>> "$DEADFILES"
echo "/etc/athena/login/bitmaps/skleyes2.xbm"	>> "$DEADFILES"
echo "/etc/athena/login/bitmaps/skleyes3.xbm"	>> "$DEADFILES"
echo "/etc/athena/login/bitmaps/skleyes4.xbm"	>> "$DEADFILES"
echo "/etc/athena/login/bitmaps/skleyes5.xbm"	>> "$DEADFILES"
echo "/etc/athena/login/bitmaps/.index"		>> "$DEADFILES"
echo "/etc/athena/login/bitmaps/.rc"		>> "$DEADFILES"
echo "/etc/athena/login/bitmaps/.sh42"		>> "$DEADFILES"
echo "/etc/athena/login/bitmaps/.netscaperc"	>> "$DEADFILES"
echo "/etc/athena/login/.Xlogin.old"		>> "$DEADFILES"
echo "/etc/athena/login/.Xsession.old"		>> "$DEADFILES"
echo "/usr/adm/syslog"				>> "$DEADFILES"
echo "/usr/adm/lastlog/null"			>> "$DEADFILES"
echo "/.netscaperc"				>> "$DEADFILES"
# A private workstation could conceivably have a /... directory,
# so manually remove the files we expect to find in /... and then
# rmdir the directory.
rm -f /.../.index /.../.netscaperc /.../.sh42 /.../.rc /.../skl \
	/.../skleyes?.xbm
rmdir /... 2>/dev/null

# Thanksgiving RC5 cracking that occured on many cluster machines:
echo "/usr/bin/.test"				>> "$DEADFILES"
echo "/usr/bin/.test.ini"			>> "$DEADFILES"
echo "/usr/bin/.test.log"			>> "$DEADFILES"
echo "/usr/bin/.ckpoint"			>> "$DEADFILES"
echo "/usr/bin/.in"				>> "$DEADFILES"
echo "/usr/bin/.out"				>> "$DEADFILES"
echo "/z2.c"					>> "$DEADFILES"

# Another RC5 cracking incident:
case "$HOSTTYPE" in
sun4)
	echo "/etc/rc5-sunos-socks4"		>> "$DEADFILES"
	;;
sgi)
	echo "/etc/rc5-irix-socks4"		>> "$DEADFILES"
	;;
esac
echo "/etc/rc5-start"				>> "$DEADFILES"
echo "/etc/rc5-start~"				>> "$DEADFILES"
echo "/var/spool/cron/crontabs/bin"		>> "$DEADFILES"
