#!/sbin/sh
#
# Make sure the state of the system is synchronized with /etc/athena/rc.conf.
#

IS_ON=/sbin/chkconfig

if $IS_ON verbose ; then
    OPTS=
else            # For a quiet startup and shutdown
    OPTS=-q
fi

case "$1" in
  'start')
	if [ -f /dev/MAKEDEV.new ]; then
		rm -f /dev/MAKEDEV.new
		echo "Running MAKEDEV..."
		(cd /dev; ./MAKEDEV > /dev/null)
	fi

	. /etc/athena/rc.conf

	case "${PUBLIC}" {
		 true) rm -f /etc/athena/.rc.conf.sync;
		       /etc/athena/syncconf $OPTS ;;
		false) case "${SYNCCONFIG}" {
				false) ;;
				 true) /etc/athena/syncconf $OPTS ;;
			} ;;
	}
        ;;

  'stop')
        ;;

  *)
        echo "usage: athena.config {start}"
        ;;
esac

