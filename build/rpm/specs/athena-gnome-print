Name: athena-gnome-print
Summary: GNOME printing libraries, for Athena
Copyright: LGPL
Group: System Environment/Base

Requires: athena-gnome-libs athena-libxml athena-gdk-pixbuf

%description
The gnome-print package contains libraries and fonts that are needed
by GNOME applications wanting to print.

%install
if [ X$RPM_BUILD_ROOT = X ]; then
  cat 1>&2 << MESSAGE
You must specify a build root in order to build this package.
Use the --buildroot option to RPM or the buildroot rpmrc entry.
MESSAGE
  exit 1
fi

rm -rf $RPM_BUILD_ROOT
mkdir $RPM_BUILD_ROOT
./do.sh -p -s /xxx -d $RPM_BUILD_ROOT install

# Adapted from gnome-print's spec file.  Only works on Linux systems.
install -m 644 run-gnome-font-install $RPM_BUILD_ROOT/usr/athena/share/fonts
(cd fonts && install -m 644 *.font $RPM_BUILD_ROOT/usr/athena/share/fonts)

find $RPM_BUILD_ROOT -type f -or -type l |
    sed -e "s|$RPM_BUILD_ROOT||" | sort > rpm.filelist

%post
# Adapted from gnome-print's spec file.  Only works on Linux systems.
perl /usr/athena/share/fonts/run-gnome-font-install \
  /usr/athena/bin/gnome-font-install /usr/athena/share /usr/athena/share
exit 0
