Name: athena-dotfiles
Summary: user template and system standard shell dotfiles for Athena
License: MIT
Group: System Environment/Shells

%description
user template and system standard shell dotfiles for Athena

%install
rm -rf $RPM_BUILD_ROOT
mkdir $RPM_BUILD_ROOT
./do.sh -p -s /xxx -d $RPM_BUILD_ROOT install

find $RPM_BUILD_ROOT -type f -or -type l | 
  sed -e "s|^$RPM_BUILD_ROOT||" \
      -e "s|^/root/.bashrc$|%config \0|" \
      -e "s|^/root/.bash_login$|%config \0|" \
      -e "s|^/root/.cshrc$|%config \0|" \
      -e "s|^/root/.login$|%config \0|" \
      -e "s|^/root/.profile$|%config \0|" \
      -e "s|^/root/.xsession$|%config \0|" | 
  sort > rpm.filelist

%post
mkdir -p -m 755 /var/athena
if [ ! -f /var/athena/root.bashhist ]; then
  touch /var/athena/root.bashhist
  chmod 600 /var/athena/root.bashhist
fi
chattr +a /var/athena/root.bashhist
