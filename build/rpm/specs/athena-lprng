Name: athena-lprng
Summary: The LPRNG printing system for Athena.
Copyright: Artistic License
Group: System Environment/Base
Provides: lpr

%description
The LPRNG printing system for Athena.

%install
if [ X$RPM_BUILD_ROOT = X ]; then
  cat 1>&2 << MESSAGE
You must specify a build root in order to build this package.
Use the --buildroot option to RPM or the buildroot rpmrc entry.
MESSAGE
  exit 1
fi

rm -rf $RPM_BUILD_ROOT
mkdir $RPM_BUILD_ROOT
./do.sh -p -s /xxx -d $RPM_BUILD_ROOT install

# Extra files
mkdir -p $RPM_BUILD_ROOT/etc/rc.d/init.d
cp lpd.conf $RPM_BUILD_ROOT/etc/lpd.conf
cp lpd.perms $RPM_BUILD_ROOT/etc/lpd.perms
cp athena-lpd.rc $RPM_BUILD_ROOT/etc/rc.d/init.d/athena-lpd
chmod +x $RPM_BUILD_ROOT/etc/rc.d/init.d/athena-lpd

%post
chkconfig --add athena-lpd

grep -q LPD /etc/athena/rc.conf || cat << EOF >> /etc/athena/rc.conf
LPD=false;		export LPD		#  Run line printer daemon?
EOF

%files
/etc/rc.d
/usr/athena
%config /etc/lpd.conf
%config /etc/lpd.perms

